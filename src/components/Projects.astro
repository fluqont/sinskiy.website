---
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
console.log(projects);
---

<ul role="list">
  {
    projects.map(({ data, body }) => (
      <li class="project">
        <a
          href={data.href}
          aria-label={`visit ${data.title} demo`}
          class="image-wrapper"
        >
          <img src={data.src} alt="" />
        </a>
        <div class="info">
          <h3>{data.title}</h3>
          <ul role="list">
            {data.tags.map((tag) => (
              <li class:list={[tag, "tag"]}>{tag}</li>
            ))}
          </ul>
          <p class="text">{body}</p>
          <nav class="links">
            <a
              href={data.href}
              aria-label={`visit ${data.title} demo`}
              class="link"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                height="24px"
                viewBox="0 -960 960 960"
                width="24px"
              >
                <path d="M440-280H280q-83 0-141.5-58.5T80-480q0-83 58.5-141.5T280-680h160v80H280q-50 0-85 35t-35 85q0 50 35 85t85 35h160v80ZM320-440v-80h320v80H320Zm200 160v-80h160q50 0 85-35t35-85q0-50-35-85t-85-35H520v-80h160q83 0 141.5 58.5T880-480q0 83-58.5 141.5T680-280H520Z" />
              </svg>
              {data.href.replace("https://", "")}
            </a>
            <a
              href={data.github}
              aria-label={`visit ${data.title} source code`}
              class="link"
            >
              <svg
                width="20"
                height="20"
                viewBox="0 0 98 96"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z"
                />
              </svg>
              {data.github.replace("https://github.com/", "")}
            </a>
          </nav>
        </div>
      </li>
    ))
  }
</ul>

<style>
  .project {
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
  }

  .image-wrapper {
    flex: 1;
    border-radius: var(--rounded-lg);
    background-color: rgb(var(--surface));
    min-width: 200px;
    aspect-ratio: 5 / 3;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .info {
    flex: 2;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  h3 {
    font-size: 2rem;
    font-weight: 600;
  }

  .tag {
    width: fit-content;
    padding: 0.25rem 1.5rem;
    background-color: rgb(var(--surface));
    border-radius: var(--rounded-full);
    font-size: 0.875rem;
    font-weight: 500;
  }

  .Astro {
    background-image: linear-gradient(
      to top right,
      rgb(19, 33, 172),
      rgb(136, 26, 189)
    );
    color: white;
  }

  .links {
    display: flex;
    gap: 1rem;
    align-items: center;
    flex-wrap: wrap;
  }

  .link {
    display: flex;
    align-items: center;
    gap: 0.25rem;
  }
  @media (max-width: 400px) {
    .link {
      font-size: 0.875rem;
    }
  }
</style>
