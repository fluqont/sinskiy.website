---
import { Thought } from "astro:db";
import { db } from "astro:db";

const thoughts = (await db.select().from(Thought)).reverse();
---

{
  thoughts.length > 0 ? (
    <ul class="thoughts" role="list">
      {thoughts.map((thought) => (
        <li class="thought">
          <adress class="author">{thought.username}</adress>
          <p class="text">{thought.message}</p>
        </li>
      ))}
    </ul>
  ) : (
    <p>
      <i>no thoughts yet</i>
    </p>
  )
}

<style>
  .thoughts {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
  }

  .thought {
    padding: 1rem 2rem;
    background-color: rgb(var(--surface));
    border-radius: var(--rounded-base);
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
  }

  .author {
    color: rgb(var(--foreground-variant));
    font-weight: 500;
    font-size: 0.875rem;
  }
</style>
